---
title: "Appendix: Example SQL"
---

```sql
-- MAGs in samples with moisture > 50%
SELECT DISTINCT m.mag_id
FROM mag m
JOIN edge e_obs
  ON e_obs.child_uid = 'mag:' || m.mag_id
 AND e_obs.edge_type = 'observed_in'
JOIN read_set r
  ON r.readset_id = substr(e_obs.parent_uid, instr(e_obs.parent_uid, ':')+1)
JOIN measurement meas
  ON meas.sample_id = r.sample_id
 AND meas.variable = 'moisture'
WHERE meas.value > 50
ORDER BY m.mag_id;
```
